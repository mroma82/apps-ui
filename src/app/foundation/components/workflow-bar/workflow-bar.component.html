<div *ngIf="instance$ | async as instance">
  <div class="bar" [class.active]="instance.isActive">    
    
    <span class="prefix" *ngIf="prefixText">{{ prefixText }}</span>
    {{ instance.instruction }}
    
    <span class="badge badge-primary" *ngIf="instance.isActive">{{ getAssignedTo(instance) }}</span>    

    <ul class="nav nav-pills float-right" *ngIf="instance.isActive">

      <li class="nav-item" *ngFor="let action of (actions$ | async)">
        <a class="nav-link active" href="javascript:;;" (click)="advance(instance, action)">{{ action.actionDescription }}</a>
      </li>
      
      <li class="nav-item" *ngIf="instance.isActive && instance.rejectTo !== '00000000-0000-0000-0000-000000000000'">
        <a class="nav-link active" href="javascript:;;" (click)="reject(instance)">Reject</a>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="javascript:;;" role="button" aria-haspopup="true"
          aria-expanded="false">Functions</a>
        <div class="dropdown-menu">
          <a class="dropdown-item" href="javscript:;;" (click)="showHistory()">History</a>
          <a class="dropdown-item" href="javscript:;;" (click)="reset()">Reset</a>
          <a class="dropdown-item" href="#">Show who is assigned</a>          
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Separated link</a>
        </div>
      </li>
    </ul>
            
    <div *ngIf="instance.isRejected" class="reject-bar">
      <strong>Rejected by {{ instance.rejectBy }}: {{ instance.rejectText }}</strong>
    </div>
  </div>

</div>

<app-workflow-assigned-list-dialog></app-workflow-assigned-list-dialog>
<app-workflow-reject-dialog></app-workflow-reject-dialog>
<app-workflow-reset-dialog></app-workflow-reset-dialog>
<app-workflow-history-list-dialog></app-workflow-history-list-dialog>