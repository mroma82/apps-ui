<div *ngIf="instance$ | async as instance">
  <div id="bar" [class.active]="instance.isActive">    
    
    <span *ngIf="prefixText">{{ prefixText }}</span>
    {{ instance.instruction }}

    <button type="button" class="btn btn-link" *ngIf="instance.isActive" (click)="showAssignedListDialog()">
      {{ getAssignedTo(instance) }}
    </button>

    <div *ngIf="instance.isActive">
      <div *ngIf="actions$ | async as actions">
        <button *ngFor="let action of actions" [disabled]="busy$ | async"  type="button" class="btn btn-primary" (click)="advance(instance, action)">{{ action.actionDescription }}</button>      
      </div>    
    </div>
    
    <button [disabled]="busy$ | async" *ngIf="instance.isActive && instance.rejectTo !== '00000000-0000-0000-0000-000000000000'" type="button" class="btn btn-default" (click)="reject(instance)">Reject</button>

    <button [disabled]="busy$ | async" type="button" class="btn btn-default" (click)="reset()">Reset</button>

    <div *ngIf="instance.isRejected" id="rejectBar">
      <strong>Rejected by {{ instance.rejectBy }}: {{ instance.rejectText }}</strong>
    </div>
  </div>

</div>

<app-workflow-assigned-list-dialog></app-workflow-assigned-list-dialog>
<app-workflow-reject-dialog></app-workflow-reject-dialog>
<app-workflow-reset-dialog></app-workflow-reset-dialog>
