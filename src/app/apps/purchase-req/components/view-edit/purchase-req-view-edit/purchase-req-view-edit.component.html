<div class="row mt-2" *ngIf="viewModel.record.id">
  <div class="col-md-12">

    <app-card-group title="Details">
      <div class="row">
        <div class="col-md-3">
          <app-text-field [(ngModel)]="viewModel.record.reqNumber" name="reqNumber" label="Req #" [disabled]="true">
          </app-text-field>
        </div>
        <div class="col-md-3">
          <app-date-field [(ngModel)]="viewModel.record.requestDate" name="requestDate" label="Request Date"
            [disabled]="viewMode"></app-date-field>
        </div>
        <div class="col-md-3">
          <app-select-field [(ngModel)]="viewModel.record.requestUserId" name="requestUserId" label="Requested by"
            [disabled]="viewMode">
            <option value="">-- Please select --</option>
            <option *ngFor="let item of userList$ | async" [value]="item.username"
              [selected]="viewModel.record.requestUserId == item.username">{{ item.name }}</option>
          </app-select-field>
        </div>
        <div class="col-md-3">
          <app-date-field [(ngModel)]="viewModel.record.requiredDate" name="requiredDate" label="Required Date"
            [disabled]="viewMode"></app-date-field>

        </div>
      </div>
    </app-card-group>

    <app-card-group title="Information">
      <div class="row">
        <div class="col-md-3">
          <app-text-field [(ngModel)]="viewModel.record.description" name="description" label="Description"
            [disabled]="viewMode"></app-text-field>
        </div>
        <div class="col-md-3">
          <app-lookup-field [(ngModel)]="viewModel.record.vendorId" name="vendorId" label="Vendor"
            [disabled]="viewMode"></app-lookup-field>
        </div>
        <div class="col-md-3">
          <app-select-field [(ngModel)]="viewModel.record.buyerGroup" name="buyerGroup" label="Buyer Group"
            [disabled]="viewMode">
            <option value="">-- Please select --</option>
            <option *ngFor="let item of buyerGroupList$ | async" [value]="item.valueId"
              [selected]="viewModel.record.buyerGroup == item.valueId">{{ item.text }}</option>
          </app-select-field>
        </div>
        <div class="col-md-3">
          <app-check-box-field [(ngModel)]="viewModel.record.isBudgeted" label="Budgeted?" [disabled]="viewMode"
            name="isBudgeted"></app-check-box-field>
          <app-check-box-field [(ngModel)]="viewModel.record.isCapital" label="Capital?" [disabled]="viewMode"
            name="isCapital"></app-check-box-field>
        </div>
      </div>

      <div class="row">
        <div class="col-md-3">
          <app-select-field [(ngModel)]="viewModel.record.projectId" name="projectId" label="Project"
            [disabled]="viewMode">
            <option value="">-- Please select --</option>
            <option *ngFor="let item of projectList$ | async" [value]="item.projectId"
              [selected]="viewModel.record.projectId == item.projectId">{{ item.projectName }}</option>
          </app-select-field>
        </div>
        <div class="col-md-3">
          <app-select-field [(ngModel)]="viewModel.record.department" name="department" label="Department"
            [disabled]="viewMode">
            <option value="">-- Please select --</option>
            <option *ngFor="let item of departmentList$ | async" [value]="item.departmentId"
              [selected]="viewModel.record.department == item.departmentId">{{ item.departmentName }}</option>
          </app-select-field>
        </div>
        <div class="col-md-3">
          <app-select-field [(ngModel)]="viewModel.record.location" name="locationId" label="Location"
            [disabled]="viewMode">
            <option value="">-- Please select --</option>
            <option *ngFor="let item of locationList$ | async" [value]="item.locationId"
              [selected]="viewModel.record.location == item.locationId">{{ item.locationName }}</option>
          </app-select-field>
        </div>
        <div class="col-md-3">

        </div>
      </div>
    </app-card-group>





    <app-card-group title="Purchasing">
      <div class="row">
        <div class="col-md-3">
          <app-text-field [(ngModel)]="viewModel.record.poNumber" name="poNumber" label="PO #" [disabled]="viewMode">
          </app-text-field>
        </div>
        <div class="col-md-3">

        </div>
        <div class="col-md-3">

        </div>
        <div class="col-md-3">

        </div>
      </div>
    </app-card-group>

    <app-card-group title="Lines">
      <table class="table">
        <thead>
          <tr>
            <th>Item #</th>
            <th>Description</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Ext Price</th>
            <th style="width:100px"></th>
          </tr>
        </thead>
        <thead>
            <tr>
              <td>ABC</td>
              <td>ABC Description</td>
              <td>4</td>
              <td>{{ 1.99 | currency }}</td>
              <td>{{ 4 * 1.99 | currency }}</td>
              <td>
                <button type="button" class="btn btn-link" (click)="deleteLine(line)">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </td>
            </tr>
            <tr>
                <td>DEF</td>
                <td>DEF Description</td>
                <td>2</td>
                <td>{{ 2.99 | currency }}</td>
                <td>{{ 2 * 2.99 | currency }}</td>
                <td>
                  <button type="button" class="btn btn-link" (click)="deleteLine(line)">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </td>
              </tr>
          </thead>
          <tfoot>
            <tr>
              <th colspan="4">
                <button type="button" (click)="addLine()" class="btn btn-primary">Add Line</button>
              </th>
              <th>{{ viewModel.record.lineTotal | currency }}</th>
              <th></th>
            </tr>
          </tfoot>
      </table>
    </app-card-group>

  </div>
</div>